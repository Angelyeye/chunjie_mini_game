# é¡¹ç›®ç»´æŠ¤è¯´æ˜

æœ¬æ–‡ä»¶é¢å‘é›¶åŸºç¡€ç»´æŠ¤è€…ï¼Œè¯´æ˜é¡¹ç›®ç»“æ„ã€ä¿®æ”¹æ–¹å¼ï¼Œä»¥åŠå¦‚ä½•æ·»åŠ /ä¿®æ”¹/åˆ é™¤è§’è‰²ã€è§’è‰²ä¸“å±äº‹ä»¶ã€é€šç”¨äº‹ä»¶ã€‚

## ä¸€ã€é¡¹ç›®ç»“æ„ï¼ˆé‡è¦æ–‡ä»¶ä¸€è§ˆï¼‰

- æ ¹ç›®å½• index.htmlï¼šåªæ˜¯è·³è½¬é¡µï¼Œä¼šè‡ªåŠ¨è·³åˆ° src/index.html
- src/index.htmlï¼šä¸»é¡µé¢å…¥å£
- src/styles.cssï¼šæ ·å¼
- src/game.jsï¼šæ ¸å¿ƒé€»è¾‘ï¼ˆåŠ è½½æ•°æ®ã€æ¸²æŸ“è§’è‰²ã€äº‹ä»¶ã€ç»“å±€ï¼‰
- data/characters.jsonï¼šè§’è‰²æ•°æ®
- data/character_events.jsonï¼šè§’è‰²ä¸“å±äº‹ä»¶
- data/common_events.jsonï¼šé€šç”¨äº‹ä»¶
- data/endings.jsonï¼šç»“å±€æ•°æ®
- images/ï¼šè§’è‰²å¤´åƒç­‰å›¾ç‰‡èµ„æº
- .github/workflows/deploy.ymlï¼šGitHub Pages è‡ªåŠ¨éƒ¨ç½²é…ç½®

## äºŒã€å¦‚ä½•è¿è¡Œä¸ä¿®æ”¹

1. ç”¨æœ¬åœ°æœåŠ¡å™¨æ‰“å¼€é¡¹ç›®ï¼ˆé¿å…ç›´æ¥åŒå‡»æ‰“å¼€ HTML é€ æˆæ•°æ®åŠ è½½å¤±è´¥ï¼‰
2. ä¿®æ”¹ data/ é‡Œçš„ JSON æ–‡ä»¶æˆ– images/ å›¾ç‰‡
3. ä¿å­˜ååˆ·æ–°æµè§ˆå™¨å³å¯çœ‹åˆ°å˜åŒ–

## ä¸‰ã€è§’è‰²ç»´æŠ¤ï¼ˆdata/characters.jsonï¼‰

### è§’è‰²å­—æ®µè¯´æ˜

æ¯ä¸ªè§’è‰²æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæ”¾åœ¨ characters æ•°ç»„é‡Œï¼Œå¸¸ç”¨å­—æ®µå¦‚ä¸‹ï¼š

- idï¼šè§’è‰²å”¯ä¸€æ ‡è¯†ï¼ˆåç»­è§’è‰²ä¸“å±äº‹ä»¶éœ€è¦ç”¨è¿™ä¸ª idï¼‰
- nameï¼šè§’è‰²åç§°
- titleï¼šè§’è‰²å¤´è¡”ï¼ˆå¯é€‰ï¼‰
- identityï¼šèº«ä»½æ ‡ç­¾ï¼ˆå¯é€‰ï¼‰
- monologueï¼šè§’è‰²ç‹¬ç™½
- avatarï¼šå¤´åƒï¼ˆæ”¯æŒå›¾ç‰‡è·¯å¾„æˆ– emojiï¼‰
- initial_attributesï¼šåˆå§‹å±æ€§ï¼ˆåªèƒ½ä½¿ç”¨ä¸‹é¢ 6 ä¸ªé”®ï¼‰
  - depositï¼ˆå­˜æ¬¾ï¼‰
  - weightï¼ˆä½“é‡ï¼‰
  - faceï¼ˆé¢å­ï¼‰
  - moodï¼ˆå¿ƒæƒ…ï¼‰
  - healthï¼ˆå¥åº·ï¼‰
  - luckï¼ˆè¿æ°”ï¼‰

### æ–°å¢è§’è‰²ï¼ˆç¤ºä¾‹ï¼‰

```json
{
  "id": "new_role",
  "name": "æ–°è§’è‰²",
  "title": "è§’è‰²å¤´è¡”",
  "identity": "èº«ä»½æ ‡ç­¾",
  "monologue": "ä¸€å¥è§’è‰²ç‹¬ç™½",
  "avatar": "../images/char-11.png",
  "initial_attributes": {
    "deposit": 3000,
    "weight": 60,
    "face": 20,
    "mood": 70,
    "health": 80,
    "luck": 40
  }
}
```

### ä¿®æ”¹è§’è‰²

- æ‰¾åˆ°å¯¹åº” id çš„å¯¹è±¡ï¼Œç›´æ¥æ”¹ name/title/monologue/å±æ€§ç­‰
- avatar å¯ç”¨å›¾ç‰‡è·¯å¾„ï¼ˆå¦‚ ../images/xxx.pngï¼‰æˆ– emojiï¼ˆå¦‚ "ğŸ§§"ï¼‰

### åˆ é™¤è§’è‰²

- ä» characters æ•°ç»„åˆ é™¤å¯¹åº”å¯¹è±¡
- åŒæ­¥åˆ é™¤ data/character_events.json ä¸­è¯¥è§’è‰²çš„ä¸“å±äº‹ä»¶ï¼ˆcharacter_id ä¸è§’è‰² id ä¸€è‡´ï¼‰
- å¦‚æœæœ‰ç”¨åˆ°å¤´åƒå›¾ç‰‡ï¼Œä¹Ÿå¯ä» images/ åˆ é™¤

## å››ã€è§’è‰²ä¸“å±äº‹ä»¶ï¼ˆdata/character_events.jsonï¼‰

è§’è‰²ä¸“å±äº‹ä»¶åªä¼šå¯¹æŒ‡å®šè§’è‰²ç”Ÿæ•ˆã€‚æ ¸å¿ƒå­—æ®µï¼š

- event_idï¼šäº‹ä»¶å”¯ä¸€æ ‡è¯†
- event_nameï¼šäº‹ä»¶åç§°ï¼ˆä¼šå½±å“åœºæ™¯ emojiï¼‰
- character_idï¼šå¿…é¡»ä¸ characters.json é‡Œçš„è§’è‰² id å®Œå…¨ä¸€è‡´
- dayï¼šç¬¬å‡ å¤©è§¦å‘ï¼ˆ1-9ï¼‰ï¼Œä¸å†™åˆ™ä»»æ„å¤©
- time_slotï¼šæ—¶æ®µï¼ˆmorning / noon / afternoon / evening / nightï¼‰ï¼Œä¸å†™åˆ™ä»»æ„æ—¶æ®µ
- descriptionï¼šäº‹ä»¶æ­£æ–‡
- optionsï¼šé€‰é¡¹æ•°ç»„

æ¯ä¸ªé€‰é¡¹å­—æ®µï¼š

- option_idï¼šé€‰é¡¹å”¯ä¸€æ ‡è¯†
- textï¼šé€‰é¡¹æ–‡å­—
- effectsï¼šå±æ€§å˜åŒ–ï¼ˆåªæ”¯æŒ deposit/weight/face/mood/health/luckï¼‰
- result_descï¼šç»“æœæè¿°ï¼ˆç”¨äºå¼¹çª—åé¦ˆï¼‰

### æ–°å¢è§’è‰²ä¸“å±äº‹ä»¶ï¼ˆç¤ºä¾‹ï¼‰

```json
{
  "event_id": "new_role_day1_morning",
  "event_name": "è¿”ä¹¡ç¬¬ä¸€å¤©",
  "character_id": "new_role",
  "day": 1,
  "time_slot": "morning",
  "description": "ä½ åˆšåˆ°å®¶ï¼Œäº²æˆšä»¬å°±å›´äº†ä¸Šæ¥â€¦â€¦",
  "options": [
    {
      "option_id": "new_role_day1_morning_a",
      "text": "ä¸»åŠ¨æ‰“æ‹›å‘¼",
      "effects": { "face": 5, "mood": 5 },
      "result_desc": "æ°”æ°›å˜å¾—èæ´½èµ·æ¥ã€‚"
    },
    {
      "option_id": "new_role_day1_morning_b",
      "text": "è£…ä½œæ²¡çœ‹è§",
      "effects": { "face": -5, "mood": 2 },
      "result_desc": "äº²æˆšè§‰å¾—ä½ æœ‰ç‚¹å†·æ·¡ã€‚"
    }
  ]
}
```

### ä¿®æ”¹/åˆ é™¤è§’è‰²ä¸“å±äº‹ä»¶

- ä¿®æ”¹ï¼šæ‰¾åˆ°å¯¹åº” event_id æ”¹å†…å®¹å³å¯
- åˆ é™¤ï¼šä» events æ•°ç»„åˆ é™¤è¯¥äº‹ä»¶å¯¹è±¡

## äº”ã€é€šç”¨äº‹ä»¶ï¼ˆdata/common_events.jsonï¼‰

é€šç”¨äº‹ä»¶æ‰€æœ‰è§’è‰²éƒ½ä¼šé‡åˆ°ã€‚æ ¸å¿ƒå­—æ®µï¼š

- event_idï¼šäº‹ä»¶å”¯ä¸€æ ‡è¯†
- event_nameï¼šäº‹ä»¶åç§°
- typeï¼šäº‹ä»¶ç±»å‹ï¼ˆå¯ä¸æ”¹ï¼‰
- trigger_conditionï¼šè§¦å‘æ¡ä»¶
  - probabilityï¼šè§¦å‘æ¦‚ç‡ï¼ˆ0-1 ä¹‹é—´ï¼‰
  - sceneï¼šåœºæ™¯æ–‡å­—ï¼Œä¼šæ˜¾ç¤ºåœ¨å·¦ä¾§ä½ç½®æ 
- descriptionï¼šäº‹ä»¶æ­£æ–‡
- optionsï¼šé€‰é¡¹æ•°ç»„ï¼ˆå­—æ®µä¸ä¸“å±äº‹ä»¶ä¸€è‡´ï¼‰

### æ–°å¢é€šç”¨äº‹ä»¶ï¼ˆç¤ºä¾‹ï¼‰

```json
{
  "event_id": "common_new_year_visit",
  "event_name": "èµ°äº²æˆš",
  "type": "common",
  "trigger_condition": {
    "type": "random",
    "probability": 0.2,
    "scene": "èµ°äº²è®¿å‹çš„ä¸€å¤©"
  },
  "description": "äº²æˆšä»¬çƒ­æƒ…æ‹›å¾…ï¼Œä½ æœ‰ç‚¹æ‹›æ¶ä¸ä½ã€‚",
  "options": [
    {
      "option_id": "common_new_year_visit_a",
      "text": "é™ªèŠåˆ°åº•",
      "effects": { "mood": -3, "face": 5 },
      "result_desc": "ä½ å¾ˆç´¯ï¼Œä½†é¢å­æ¶¨äº†ã€‚"
    }
  ]
}
```

### ä¿®æ”¹/åˆ é™¤é€šç”¨äº‹ä»¶

- ä¿®æ”¹ï¼šç›´æ¥æ”¹ event_id å¯¹åº”å¯¹è±¡
- åˆ é™¤ï¼šä» events æ•°ç»„åˆ é™¤

## å…­ã€å¸¸è§é—®é¢˜

### 1. äº‹ä»¶/è§’è‰²æ”¹äº†ä¸ç”Ÿæ•ˆ

- JSON æ ¼å¼æœ‰é”™è¯¯ä¼šå¯¼è‡´åŠ è½½å¤±è´¥ï¼Œæ¸¸æˆä¼šå›é€€é»˜è®¤æ•°æ®
- ä½¿ç”¨æœ¬åœ°æœåŠ¡å™¨æ‰“å¼€é¡µé¢ï¼Œé¿å…ç›´æ¥æ‰“å¼€ HTML

### 2. è§’è‰²ä¸“å±äº‹ä»¶ä¸è§¦å‘

- ç¡®è®¤ character_id ä¸ characters.json çš„ id å®Œå…¨ä¸€è‡´
- æ£€æŸ¥ day/time_slot æ˜¯å¦åˆç†

### 3. æ—¶é—´æ®µå¯ç”¨å€¼

å¯ç”¨ï¼šmorning / noon / afternoon / evening / night  
ä¸å†™åˆ™ä»»æ„æ—¶é—´éƒ½å¯èƒ½è§¦å‘
